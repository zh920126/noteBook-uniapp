(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/monthygoals/monthygoals"],{"09e6":function(e,t,a){},2148:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a("4795")),r=a("63d6");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a,n,r,o,u){try{var s=e[o](u),i=s.value}catch(c){return void a(c)}s.done?t(i):Promise.resolve(i).then(n,r)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){u(o,n,r,s,i,"next",e)}function i(e){u(o,n,r,s,i,"throw",e)}s(void 0)}))}}var i={data:function(){return{table:[{id:1,name:"工作指标",children:[{complete:!1,content:"",importanceLevel:"",aimMeasures:"",month:"",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",month:"",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",month:"",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",month:"",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",month:"",type:"工作指标",year:(new Date).getFullYear()}]},{id:2,name:"其他目标",children:[{complete:!1,content:"",importanceLevel:"学习计划",aimMeasures:"",month:"",type:"其他目标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"健康计划",aimMeasures:"",month:"",type:"其他目标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"本季度反省",aimMeasures:"",month:"",type:"其他目标",year:(new Date).getFullYear()}]}],reasonArr:[{content:"",type:"未完成目标的障碍和原因"},{content:"",type:"客服障碍的对策和方法"},{content:"",type:"本月份创新与收获"}],month:(new Date).getMonth()+1,year:(new Date).getFullYear(),update:!0,update1:!0}},methods:{bindDateChange:function(e){var t=e.detail.value;this.month=new Date(t).getMonth()+1,this.year=new Date(t).getFullYear(),this.getUserQuarter(),this.getUserSummary()},handleLastMonth:function(){this.month-1==0?(this.month=12,this.year--):this.month--,this.getUserQuarter(),this.getUserSummary()},handleNextMonth:function(){this.month+1==13?(this.month=1,this.year++):this.month++,this.getUserQuarter(),this.getUserSummary()},handleReason:function(t,a){var o=this;return s(n.default.mark((function u(){var s,i,c;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.detail.value,i={content:s,month:o.month,type:a.type,userid:e.getStorageSync("userID"),year:o.year},a.id&&(i.id=a.id),n.next=5,(0,r.myAxios)({method:"post",url:"/anonymous/updateSummarize",data:i});case 5:c=n.sent,200==c.data.statusCode?o.getUserSummary():e.showToast({title:"更新失败,请重试",icon:"none",duration:500});case 7:case"end":return n.stop()}}),u)})))()},handleComplete:function(t){var a=this;return s(n.default.mark((function o(){var u,s;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(u={complete:!t.complete,content:t.content,importanceLevel:t.importanceLevel,aimMeasures:t.aimMeasures,type:t.type,month:a.month,userId:e.getStorageSync("userID"),year:a.year},!t.id){n.next=7;break}return u.id=t.id,n.next=5,(0,r.myAxios)({method:"post",url:"/anonymous/updateOrInsertAirms",data:u});case 5:s=n.sent,200==s.data.statusCode?a.getUserQuarter():e.showToast({title:"更新失败,请重试",icon:"none",duration:500});case 7:case"end":return n.stop()}}),o)})))()},handleMeasures:function(t,a){var o=this;return s(n.default.mark((function u(){var s,i,c;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.detail.value,i={complete:a.complete,content:a.content,importanceLevel:a.importanceLevel,aimMeasures:s,type:a.type,month:o.month,userId:e.getStorageSync("userID"),year:o.year},a.id&&(i.id=a.id),n.next=5,(0,r.myAxios)({method:"post",url:"/anonymous/updateOrInsertAirms",data:i});case 5:c=n.sent,200==c.data.statusCode?o.getUserQuarter():e.showToast({title:"更新失败,请重试",icon:"none",duration:500});case 7:case"end":return n.stop()}}),u)})))()},handleContent:function(t,a){var o=this;return s(n.default.mark((function u(){var s,i,c;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.detail.value,i={complete:a.complete,content:s,importanceLevel:a.importanceLevel,aimMeasures:a.aimMeasures,type:a.type,month:o.month,userId:e.getStorageSync("userID"),year:o.year},a.id&&(i.id=a.id),n.next=5,(0,r.myAxios)({method:"post",url:"/anonymous/updateOrInsertAirms",data:i});case 5:c=n.sent,200==c.data.statusCode?o.getUserQuarter():e.showToast({title:"更新失败,请重试",icon:"none",duration:500});case 7:case"end":return n.stop()}}),u)})))()},handleLevel:function(t,a){var o=this;return s(n.default.mark((function u(){var s,i,c;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.detail.value,i={complete:a.complete,content:a.content,importanceLevel:s,aimMeasures:a.aimMeasures,type:a.type,month:o.month,userId:e.getStorageSync("userID"),year:o.year},a.id&&(i.id=a.id),n.next=5,(0,r.myAxios)({method:"post",url:"/anonymous/updateOrInsertAirms",data:i});case 5:c=n.sent,200==c.data.statusCode?o.getUserQuarter():e.showToast({title:"更新失败,请重试",icon:"none",duration:500});case 7:case"end":return n.stop()}}),u)})))()},getUserQuarter:function(){var t=this;return s(n.default.mark((function a(){var o,u,s,i;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.update=!1,a.next=3,(0,r.myAxios)({method:"post",url:"/anonymous/findAimsByCondition",data:{month:t.month,userId:e.getStorageSync("userID"),year:t.year}});case 3:o=a.sent,200==o.data.statusCode&&o.data.otherTarget&&o.data.workIndex?(t.table=[{id:1,name:"工作指标",children:[{complete:!1,content:"",importanceLevel:"",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"工作指标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"工作指标",year:(new Date).getFullYear()}]},{id:2,name:"其他目标",children:[{complete:!1,content:"",importanceLevel:"学习计划",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"其他目标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"健康计划",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"其他目标",year:(new Date).getFullYear()},{complete:!1,content:"",importanceLevel:"本季度反省",aimMeasures:"",quarter:"",quarterOrMonthFlag:"quarter",type:"其他目标",year:(new Date).getFullYear()}]}],u=o.data,s=u.otherTarget,i=u.workIndex,i.forEach((function(e,a){t.table[0].children[a]=e,t.table[0].children.length=5})),s.forEach((function(e,a){"学习计划"==e.importanceLevel?t.table[1].children[0]=e:"健康计划"==e.importanceLevel?t.table[1].children[1]=e:"本季度反省"==e.importanceLevel?t.table[1].children[2]=e:table[1].children.push(e),t.table[1].children.length=3}))):e.showToast({title:"获取季度信息失败,请重试",icon:"none",duration:500}),t.update=!0;case 6:case"end":return a.stop()}}),a)})))()},getUserSummary:function(){var t=this;return s(n.default.mark((function a(){var o,u;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.update1=!1,a.next=3,(0,r.myAxios)({method:"post",url:"/anonymous/querySummarize",data:{month:t.month,userid:e.getStorageSync("userID"),year:t.year}});case 3:o=a.sent,200==o.data.statusCode&&o.data.result?(t.reasonArr=[{content:"",type:"未完成目标的障碍和原因"},{content:"",type:"客服障碍的对策和方法"},{content:"",type:"本季度创新与收获"}],u=o.data.result,u.forEach((function(e){for(var a=0;a<t.reasonArr.length;a++)e.type==t.reasonArr[a].type&&(t.reasonArr[a]=e)}))):e.showToast({title:"获取月总结失败,请重试",icon:"none",duration:500}),t.update1=!0;case 6:case"end":return a.stop()}}),a)})))()}},onLoad:function(){this.getUserQuarter(),this.getUserSummary()}};t.default=i}).call(this,a("543d")["default"])},"7daa":function(e,t,a){"use strict";var n,r=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}))},cf3c:function(e,t,a){"use strict";a.r(t);var n=a("7daa"),r=a("f013");for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);a("e2c5");var u,s=a("f0c5"),i=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=i.exports},e2c5:function(e,t,a){"use strict";var n=a("09e6"),r=a.n(n);r.a},ee9b:function(e,t,a){"use strict";(function(e){a("d5ac");n(a("66fd"));var t=n(a("cf3c"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},f013:function(e,t,a){"use strict";a.r(t);var n=a("2148"),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a}},[["ee9b","common/runtime","common/vendor"]]]);